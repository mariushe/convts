(this.webpackJsonpconvts=this.webpackJsonpconvts||[]).push([[0],{11:function(t,n,e){},12:function(t,n,e){},16:function(t,n,e){"use strict";e.r(n);var r=e(1),i=e.n(r),u=e(6),c=e.n(u),a=(e(11),e(4)),o=(e(12),e(0)),s=function(t){var n=t.layer;return Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"px-4 p-2 m-4 max-w-sm mx-auto bg-gray-800 rounded-xl shadow-md flex items-center space-x-4",children:[n.name()," ",n.getInputSize()&&n.getOutputSize()?" (".concat(n.getInputSize(),", ").concat(n.getOutputSize(),")"):""]})})},l=function(t){var n=t.network;return Object(o.jsxs)("section",{children:[Object(o.jsx)("h1",{className:"text-3xl",children:"Layers"}),n.layers.map((function(t,n){return Object(o.jsx)(s,{layer:t},"layer_".concat(n))}))]})},f=function(t){var n=t.network;return Object(o.jsx)("div",{children:Object(o.jsx)(l,{network:n})})},h=function(t){return t.map((function(t){return t.map((function(t){return t>0?t:.01*t}))}))},p=function(t){return t.map((function(t){return t.map((function(t){return t>0?1:.01}))}))},d=e(2),m=e(3),b=function(t,n){return 1===t.length&&1===t[0].length&&1===n.length?n.map((function(n){return n.map((function(n){return n*t[0][0]}))})):1===t.length&&t[0].length>1&&n.length===t[0].length?[Array.from(Array(n[0].length).keys()).map((function(e,r){return t[0].map((function(e,i){return t[0][i]*n[i][r]})).reduce((function(t,n){return t+n}),0)}))]:1===t[0].length&&1===n.length?t.map((function(e,r){return n[0].map((function(e,i){return t[r][0]*n[0][i]})).filter((function(t){return!isNaN(t)}))})):t.map((function(e,r){return t.map((function(i,u){return Array.from(Array(e.length).keys()).reduce((function(e,i){return e+t[r][i]*n[i][u]}),0)})).filter((function(t){return!isNaN(t)}))}))},g=function(t,n){if("number"===typeof n)return t.map((function(e,r){return t[r].map((function(e,i){return t[r][i]*n}))}));if(t.length===n.length)return t.map((function(e,r){return t[0].map((function(e,i){return t[r][i]*n[r][i]}))}));if(1===t.length)return n.map((function(e,r){return n[0].map((function(e,i){return t[0][i]*n[r][i]}))}));if(1===n.length)return t.map((function(e,r){return t[0].map((function(e,i){return t[r][i]*n[0][i]}))}));throw Error("Dimentions didn't match. a=".concat(t," b=").concat(n))},j=function(t,n){if(t.length===n.length)return t.map((function(e,r){return t[0].map((function(e,i){return t[r][i]-n[r][i]}))}));if(1===t.length)return n.map((function(e,r){return n[0].map((function(e,i){return t[0][i]-n[r][i]}))}));if(1===n.length)return t.map((function(e,r){return t[0].map((function(e,i){return t[r][i]-n[0][i]}))}));throw Error("Dimentions didn't match. a=".concat(t," b=").concat(n))},v=function(t){return t[0].map((function(n,e){return t.map((function(t){return t[e]}))}))},x=function(){function t(n,e,r,i){Object(d.a)(this,t),this.activation=void 0,this.activationPrime=void 0,this.input=[],this.output=[],this.index=void 0,this.neuronListener=void 0,this.activation=e,this.activationPrime=r,this.index=n,this.neuronListener=i}return Object(m.a)(t,[{key:"name",value:function(){return"Activation"}},{key:"getInputSize",value:function(){}},{key:"getOutputSize",value:function(){}},{key:"forwardPropagation",value:function(t){return this.input=t,this.output=this.activation(t),this.neuronListener&&this.neuronListener.recordNeurons(this.index,{layerName:"Activation",result:this.output,inputSize:t[0].length,outputSize:this.output[0].length}),this.output}},{key:"backPropagation",value:function(t,n){return g(this.activationPrime(this.input),t)}}]),t}(),y=function(t,n){return Array.from(Array(t).keys()).map((function(t){return Array.from(Array(n).keys()).map((function(t){return Math.random()-.5}))}))},O=function(){function t(n,e,r,i){Object(d.a)(this,t),this.weight=void 0,this.bias=void 0,this.input=[],this.inputSize=void 0,this.outputSize=void 0,this.index=void 0,this.neuronListener=void 0,this.index=n,this.inputSize=e,this.outputSize=r,this.weight=y(e,r),this.bias=y(1,r),this.neuronListener=i}return Object(m.a)(t,[{key:"getInputSize",value:function(){return this.inputSize}},{key:"getOutputSize",value:function(){return this.outputSize}},{key:"name",value:function(){return"Connected"}},{key:"forwardPropagation",value:function(t){this.input=t;var n=function(t,n){if(t.length===n.length)return t.map((function(e,r){return t[0].map((function(e,i){return t[r][i]+n[r][i]}))}));if(1===t.length)return n.map((function(e,r){return n[0].map((function(e,i){return t[0][i]+n[r][i]}))}));if(1===n.length)return t.map((function(e,r){return t[0].map((function(e,i){return t[r][i]+n[0][i]}))}));throw Error("Dimentions didn't match. a=".concat(t," b=").concat(n))}(b(t,this.weight),this.bias);return this.neuronListener&&this.neuronListener.recordNeurons(this.index,{layerName:"Connected",result:n,inputSize:this.inputSize,outputSize:this.outputSize}),n}},{key:"backPropagation",value:function(t,n){var e=b(t,v(this.weight)),r=b(v(this.input),t);return this.weight=j(this.weight,g(r,n)),this.bias=j(this.bias,g(t,n)),e}}]),t}(),k={loss:function(t,n){var e=0;return j(t,n).map((function(t){return t.map((function(t){return e+=1,Math.pow(t,2)}))})).reduce((function(t,n){return t+n.reduce((function(t,n){return t+n}),0)}),0)/e},lossPrime:function(t,n){var e=t.reduce((function(t,n){return t+n.length}),0);return g(function(t,n){if("number"===typeof n)return t.map((function(e,r){return t[r].map((function(e,i){return t[r][i]/n}))}));if(t.length===n.length)return t.map((function(e,r){return t[0].map((function(e,i){return t[r][i]/n[r][i]}))}));if(1===t.length)return n.map((function(e,r){return n[0].map((function(e,i){return t[0][i]/n[r][i]}))}));if(1===n.length)return t.map((function(e,r){return t[0].map((function(e,i){return t[r][i]/n[0][i]}))}));throw Error("Dimentions didn't match. a=".concat(t," b=").concat(n))}(j(n,t),e),2)}},w=e(14)(),S=function(){function t(n,e){Object(d.a)(this,t),this.layers=void 0,this.loss=void 0,this.learningRate=.1,this.layers=n,this.loss=e}return Object(m.a)(t,[{key:"predict",value:function(t){return this.forwardPropagate(t)}},{key:"fit",value:function(t,n,e){for(var r=this,i=-1,u=1;u<=e;u++){var c=t.map((function(t,e){var i=r.forwardPropagate(t);return w.debug({Expected:n[e],Predicted:i}),r.backPropagate(n[e],i),r.loss.loss(n[e],i)})).reduce((function(t,n){return t+n}),0)/t.length;w.info("Epoch ".concat(u,"/").concat(e," error=").concat(c)),i=c}return i}},{key:"backPropagate",value:function(t,n){var e=this.loss.lossPrime(t,n);w.debug({"LOSS PRIME ":e});for(var r=this.layers.length-1;r>=0;r--)e=this.layers[r].backPropagation(e,this.learningRate)}},{key:"forwardPropagate",value:function(t){return this.layers.reduce((function(t,n){return n.forwardPropagation(t)}),t)}}],[{key:"create",value:function(n,e){return new t(n,e)}}]),t}(),z=function(){function t(n){Object(d.a)(this,t),this.callback=void 0,this.record=!1,this.lastUpdate=Date.now(),this.result={},this.callback=n}return Object(m.a)(t,[{key:"startRecording",value:function(){this.record=!0}},{key:"stopRecording",value:function(){this.record=!1}},{key:"recordNeurons",value:function(t,n){this.record&&(this.lastUpdate=Date.now(),this.callback(t,n),this.result["".concat(t)]=n)}}]),t}(),N=function(t){var n=t.probability;return Object(o.jsx)("div",{className:"flex justify-center items-center m-1 w-12 h-12 ".concat(n>.1?"bg-blue-600":"bg-gray-500"," bg-opacity-50 rounded-full border-red-700"),children:n.toFixed(2)})},P=function(t){var n=t.neuron;return Object(o.jsx)("div",{className:"bg-gray-800 rounded-md max-w-xl m-2 p-5 w-full",children:Object(o.jsxs)("div",{className:"flex items-center",children:[Object(o.jsxs)("div",{className:"flex-grow",children:[Object(o.jsx)("div",{className:"text-xl",children:n.layerName}),Object(o.jsxs)("div",{className:"text opacity-70",children:["Input size: ",n.inputSize]}),Object(o.jsxs)("div",{className:"text  opacity-70",children:["Output size: ",n.outputSize]})]}),Object(o.jsx)("div",{className:"flex justify-items-center flex-grow",children:n.result[0].map((function(t){return Object(o.jsx)(N,{probability:t})}))})]})})},L=function(t){t.lastUpdate;var n=t.neuronListener;return Object(o.jsxs)("div",{className:"flex flex-col items-center",children:[Object(o.jsx)("h2",{className:"text-3xl md:text-4xl font-medium mb-2",children:"Network visualization"}),Object.values(n.result).map((function(t){return Object(o.jsx)(P,{neuron:t})}))]})};var C=function(){var t=Object(r.useState)(Date.now()),n=Object(a.a)(t,2),e=n[0],i=n[1],u=Object(r.useState)(new z((function(t,n){return console.log(n)}))),c=Object(a.a)(u,2),s=c[0],l=(c[1],Object(r.useState)(function(t){return S.create([new O(1,2,3,t),new x(2,h,p,t),new O(3,3,1,t),new x(4,h,p,t)],k)}(s))),d=Object(a.a)(l,2),m=d[0],b=(d[1],Object(r.useState)(void 0)),g=Object(a.a)(b,2),j=g[0],v=g[1],y=[[[0,0]],[[0,1]],[[1,0]],[[1,1]]],w=[[[0]],[[1]],[[1]],[[0]]];return Object(o.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:Object(o.jsxs)("main",{children:[Object(o.jsx)(f,{network:m}),Object(o.jsx)("button",{onClick:function(){v(m.fit(y,w,1e3)),s.startRecording()},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",children:"Create and train"}),j&&Object(o.jsxs)("p",{children:["Error after last epoch: ",j]}),j&&Object(o.jsx)("p",{onClick:function(){m.predict([[1,0]]),i(s.lastUpdate)},children:"Testing 1,0"}),j&&Object(o.jsx)("p",{onClick:function(){m.predict([[0,0]]),i(s.lastUpdate)},children:"Testing 0,0"}),j&&Object(o.jsx)("p",{onClick:function(){m.predict([[0,1]]),i(s.lastUpdate)},children:"Testing 0,1"}),j&&Object(o.jsx)("p",{onClick:function(){m.predict([[1,1]]),i(s.lastUpdate)},children:"Testing 1,1"}),Object(o.jsx)(L,{lastUpdate:e,neuronListener:s})]})})},A=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,17)).then((function(n){var e=n.getCLS,r=n.getFID,i=n.getFCP,u=n.getLCP,c=n.getTTFB;e(t),r(t),i(t),u(t),c(t)}))};c.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(C,{})}),document.getElementById("root")),A()}},[[16,1,2]]]);
//# sourceMappingURL=main.1a8fa9a3.chunk.js.map